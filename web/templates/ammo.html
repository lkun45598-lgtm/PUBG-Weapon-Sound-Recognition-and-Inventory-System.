{% extends "base.html" %}

{% block title %}å¼¹è¯ç®¡ç† - PUBGæ­¦å™¨ç®¡ç†ç³»ç»Ÿ{% endblock %}

{% block content %}
<div class="ammo-page">
    <h2>ğŸ”« å¼¹è¯ç®¡ç†</h2>

    <!-- å¼¹è¯åº“å­˜ -->
    <div class="section">
        <h3>ğŸ“¦ å¼¹è¯åº“å­˜</h3>

        {% if ammo_inventory %}
        <div class="ammo-grid">
            {% for ammo_type, amount in ammo_inventory.items() %}
            <div class="ammo-card">
                <div class="ammo-icon">ğŸ“¦</div>
                <h4>{{ ammo_type }}</h4>
                <div class="ammo-amount">
                    <span class="current">{{ amount }}</span>
                    <span class="total">/ {{ total_ammo.get(ammo_type, amount) }}</span>
                </div>
                <small>åº“å­˜ / æ€»è®¡</small>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="empty-message">æš‚æ— å¼¹è¯åº“å­˜</p>
        {% endif %}
    </div>

    <!-- æ·»åŠ å¼¹è¯ -->
    <div class="section">
        <h3>â• æ·»åŠ å¼¹è¯</h3>
        <form method="POST" action="{{ url_for('add_ammo') }}" class="ammo-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="form-group">
                <label for="ammo_type">å¼¹è¯ç±»å‹:</label>
                <select name="ammo_type" id="ammo_type" required>
                    <option value="5.56mm">5.56mm</option>
                    <option value="7.62mm">7.62mm</option>
                    <option value="9mm">9mm</option>
                    <option value=".45ACP">.45ACP</option>
                    <option value="12gauge">12gauge</option>
                    <option value=".300Magnum">.300Magnum</option>
                </select>
            </div>
            <div class="form-group">
                <label for="amount">æ•°é‡:</label>
                <input type="number" name="amount" id="amount" min="1" value="30" required>
            </div>
            <button type="submit" class="btn btn-success">æ·»åŠ å¼¹è¯</button>
        </form>
    </div>

    <!-- æ­¦å™¨æ¢å¼¹ -->
    {% if weapons %}
    <div class="section">
        <h3>ğŸ”„ æ­¦å™¨æ¢å¼¹</h3>
        <div class="weapon-reload-list">
            {% for weapon in weapons %}
            <div class="weapon-reload-item">
                <div class="weapon-reload-info">
                    <h4>{{ weapon.name }}</h4>
                    <div class="ammo-status">
                        <span class="ammo-type-badge">{{ weapon.ammo_type }}</span>
                        <span class="ammo-count">{{ weapon.current_ammo }} / {{ weapon.magazine_size }}</span>
                    </div>
                </div>
                <form method="POST" action="{{ url_for('reload_weapon_route', weapon_name=weapon.name) }}">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-primary btn-small">ğŸ”„ æ¢å¼¹</button>
                </form>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div class="section">
        <h3>ğŸ”„ æ­¦å™¨æ¢å¼¹</h3>
        <div class="empty-state">
            <div class="empty-icon">ğŸ’</div>
            <h3>èƒŒåŒ…é‡Œæ²¡æœ‰æ­¦å™¨</h3>
            <p>å»æ­¦å™¨åº“æ·»åŠ ä¸€äº›æ­¦å™¨å§!</p>
            <a href="{{ url_for('weapons') }}" class="btn btn-primary">å‰å¾€æ­¦å™¨åº“</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
