{% extends "base.html" %}

{% block title %}ä¸»é¡µ - PUBGæ­¦å™¨ç®¡ç†ç³»ç»Ÿ{% endblock %}

{% block content %}
<div class="dashboard">
    <h2>ğŸ® æ¬¢è¿, {{ username }}!</h2>

    <!-- ç»Ÿè®¡å¡ç‰‡ -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">ğŸ”«</div>
            <div class="stat-info">
                <h3>{{ all_weapons|length }}</h3>
                <p>æ­¦å™¨åº“æ­¦å™¨</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">ğŸ’</div>
            <div class="stat-info">
                <h3>{{ backpack|length }}</h3>
                <p>èƒŒåŒ…æ­¦å™¨</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">ğŸ“¦</div>
            <div class="stat-info">
                <h3>{{ ammo_inventory|length }}</h3>
                <p>å¼¹è¯ç±»å‹</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">ğŸ¤–</div>
            <div class="stat-info">
                <h3>AIè¯†åˆ«</h3>
                <p>{{ model_info.split('\\n')[0] if model_info else 'æœªåŠ è½½' }}</p>
            </div>
        </div>
    </div>

    <!-- å¿«é€Ÿæ“ä½œ -->
    <div class="section">
        <h3>âš¡ å¿«é€Ÿæ“ä½œ</h3>
        <div class="action-grid">
            <a href="{{ url_for('weapons') }}" class="action-card">
                <div class="action-icon">ğŸ”</div>
                <h4>æµè§ˆæ­¦å™¨åº“</h4>
                <p>æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ­¦å™¨</p>
            </a>

            <a href="{{ url_for('backpack') }}" class="action-card">
                <div class="action-icon">ğŸ’</div>
                <h4>æˆ‘çš„èƒŒåŒ…</h4>
                <p>ç®¡ç†ä½ çš„æ­¦å™¨</p>
            </a>

            <a href="{{ url_for('ammo') }}" class="action-card">
                <div class="action-icon">ğŸ“¦</div>
                <h4>å¼¹è¯ç®¡ç†</h4>
                <p>ç®¡ç†å¼¹è¯å’Œæ¢å¼¹</p>
            </a>

            <a href="{{ url_for('audio_recognition') }}" class="action-card">
                <div class="action-icon">ğŸµ</div>
                <h4>éŸ³é¢‘è¯†åˆ«</h4>
                <p>è¯†åˆ«æ­¦å™¨å£°éŸ³</p>
            </a>
        </div>
    </div>

    <!-- æˆ‘çš„èƒŒåŒ…é¢„è§ˆ -->
    {% if backpack %}
    <div class="section">
        <h3>ğŸ’ æˆ‘çš„èƒŒåŒ… ({{ backpack|length }}/10)</h3>
        <div class="weapon-grid">
            {% for weapon in backpack[:6] %}
            <div class="weapon-card">
                <h4>{{ weapon.name }}</h4>
                <div class="weapon-stats">
                    <span>ğŸ’¥ {{ weapon.damage }}</span>
                    <span>ğŸ”¥ {{ weapon.fire_rate }}</span>
                    <span>ğŸ“Š DPS: {{ "%.1f"|format(weapon.calculate_dps()) }}</span>
                </div>
                <span class="weapon-type">{{ weapon.weapon_type }}</span>
            </div>
            {% endfor %}
        </div>
        {% if backpack|length > 6 %}
        <a href="{{ url_for('backpack') }}" class="btn btn-secondary">æŸ¥çœ‹å…¨éƒ¨ â†’</a>
        {% endif %}
    </div>
    {% else %}
    <div class="section">
        <div class="empty-state">
            <div class="empty-icon">ğŸ’</div>
            <h3>èƒŒåŒ…æ˜¯ç©ºçš„</h3>
            <p>å»æ­¦å™¨åº“æ·»åŠ ä¸€äº›æ­¦å™¨å§!</p>
            <a href="{{ url_for('weapons') }}" class="btn btn-primary">å‰å¾€æ­¦å™¨åº“</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
